<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIZHI - Weapon Detection System</title>
    <!-- Tailwind CSS CDN for styling -->
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts for 'Inter' -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-100 font-inter min-h-screen flex items-center justify-center p-4">

    <!-- Login Page -->
    <div id="login-page" class="w-full max-w-md bg-gray-800 rounded-lg shadow-xl p-8 text-center hidden">
        <div class="mb-6">
            <!-- Project Logo -->
            <img
                src="FullLogo_Transparent.png"
                alt="MIZHI Logo"
                class="mx-auto mb-4 rounded-full"
            />
            <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-500">
                MIZHI
            </h1>
            <p class="text-gray-400 text-sm mt-2">Weapon Detection System for Kerala Police</p>
        </div>

        <h2 class="text-2xl font-semibold mb-6 text-gray-200">Login to your Account</h2>
        <form id="login-form" class="space-y-4">
            <div>
                <label for="username" class="block text-left text-sm font-medium text-gray-300 mb-1">
                    Username:
                </label>
                <input
                    type="text"
                    id="username"
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500"
                    required
                />
            </div>
            <div>
                <label for="password" class="block text-left text-sm font-medium text-gray-300 mb-1">
                    Password:
                </label>
                <input
                    type="password"
                    id="password"
                    class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500"
                    required
                />
            </div>
            <button
                type="submit"
                class="w-full flex items-center justify-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75"
            >
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2h2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2h2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
                </svg>
                Login
            </button>
        </form>
        <p id="login-message" class="mt-6 text-sm text-center text-red-400"></p>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="w-full max-w-6xl flex flex-col items-center hidden">
        <!-- Header with Project Name, Logo, and Logout -->
        <header class="w-full flex justify-between items-center bg-gray-800 rounded-lg shadow-xl p-4 mb-8">
            <div class="flex items-center">
                <img
                    src="FullLogo_Transparent.png"
                    alt="MIZHI Logo"
                    class="mr-3 rounded-full"
                />
                <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-500">
                    മിഴി Dashboard
                </h1>
            </div>
            <button
                id="logout-button"
                class="flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75"
            >
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd" />
                </svg>
                Logout
            </button>
        </header>

        <!-- Dashboard Content -->
        <div class="w-full bg-gray-800 rounded-lg shadow-xl p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-200">Live Surveillance Feed</h2>
            <div class="relative w-full aspect-video bg-gray-700 rounded-md overflow-hidden border border-gray-600">
                <video
                    id="video-feed"
                    class="w-full h-full object-contain"
                    autoplay
                    muted
                    playsinline
                >
                    Your browser does not support the video tag.
                </video>
                <div id="video-placeholder" class="absolute inset-0 flex items-center justify-center text-gray-400 text-xl">
                    Select a video source to begin.
                </div>
            </div>

            <div class="flex flex-wrap justify-center gap-4 mt-6">
                <button
                    id="start-webcam-btn"
                    class="flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75"
                >
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm11.5 3.5a1 1 0 11-2 0 1 1 0 012 0zM13 13.4V9.293l1.146 1.147a.5.5 0 00.708-.708L12.5 8.086 10.646 9.94a.5.5 0 00.708.708L12 9.293V13.4a.5.5 0 001 0z" clip-rule="evenodd" />
                    </svg>
                    Start Webcam
                </button>
                <button
                    id="upload-video-btn"
                    class="flex items-center px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75"
                >
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L6.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                    Upload Video
                </button>
                <input type="file" id="video-file-input" accept="video/*" class="hidden" />
                <button
                    id="stop-surveillance-btn"
                    class="flex items-center px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75"
                >
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                    </svg>
                    Stop Surveillance
                </button>
                <button
                    id="simulate-alert-btn"
                    class="flex items-center px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75"
                >
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                    </svg>
                    Simulate Alert
                </button>
            </div>
        </div>

        <!-- Alert History Section -->
        <div class="w-full bg-gray-800 rounded-lg shadow-xl p-6">
            <h2 class="text-2xl font-semibold mb-4 text-gray-200">Alert History</h2>
            <p class="text-lg mb-4">
                Status: <span id="system-status-display" class="font-bold text-gray-400">Idle</span>
            </p>

            <div id="alert-log" class="bg-gray-700 p-4 rounded-md h-64 overflow-y-auto border border-gray-600">
                <p class="text-gray-400">No alerts or logs yet. System is idle.</p>
            </div>
        </div>
    </div>

    <!-- Socket.IO Client Library (This line is new!) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.min.js"></script>
    <!-- Link to your JavaScript file -->
    <script src="script.js"></script>
</body>
</html>